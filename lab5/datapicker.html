<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
</head>
<body>
<header></header>
<form>
    <div class="nativeDatePicker">
        <label for="day">Enter the date:</label>
        <input type="date" id="day" name="day">
        <span class="validity"></span>
    </div>
    <p class="fallbackLabel">Enter your birthday:</p>
    <div class="fallbackDatePicker">
        <span>
            <label for="day">Day:</label>
            <select id="day" name="day">
            </select>
        </span>
        <span>
            <label for="month">Month:</label>
            <select id="month" name="month">
                <option selected>January</option>
                <option>February</option>
                <option>March</option>
                <option>April</option>
                <option>May</option>
                <option>June</option>
                <option>July</option>
                <option>August</option>
                <option>September</option>
                <option>October</option>
                <option>November</option>
                <option>December</option>
            </select>
        </span>
        <span>
            <label for="year">Year:</label>
            <select id="year" name="year">
            </select>
        </span>
    </div>
</form>
<script>
    var nativePicker = document.querySelector('.nativeDatePicker');
    var fallbackPicker = document.querySelector('.fallbackDatePicker');
    var fallbackLabel = document.querySelector('.fallbackLabel');

    var yearSelect = document.querySelector('#year');
    var monthSelect = document.querySelector('#month');
    var daySelect = document.querySelector('#day');

    fallbackPicker.style.display = 'none';
    fallbackLabel.style.display = 'none';

    var test = document.createElement('input');
    test.type = 'date';

    if(test.type === 'text') 
    {
        nativePicker.style.display = 'none';
        fallbackPicker.style.display = 'block';
        fallbackLabel.style.display = 'block';

        populateDays(monthSelect.value);
        populateYears();
    }

    function populateDays(month) 
    {
        while(daySelect.firstChild)
        {
            daySelect.removeChild(daySelect.firstChild);
        }

        var dayNum;

        if(month === 'January' || month === 'March' || month === 'May' || month === 'July' || month === 'August' || month === 'October' || month === 'December')
        {
            dayNum = 31;
        }

        else if(month === 'April' || month === 'June' || month === 'September' || month === 'November')
        {
            dayNum = 30;
        }

        else
        {
            var year = yearSelect.value;
            var leap = (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
            dayNum = leap ? 29 : 28;
        }

        for(i = 1; i <= dayNum; i++)
        {
            var option = document.createElement('option');
            option.textContent = i;
            daySelect.appendChild(option);
        }

        if(previousDay)
        {
            daySelect.value = previousDay;

            if(daySelect.value === "")
            {
            daySelect.value = previousDay - 1;
            }

            if(daySelect.value === "")
            {
            daySelect.value = previousDay - 2;
            }

            if(daySelect.value === "")
            {
            daySelect.value = previousDay - 3;
            }
        }
    }

    function populateYears() 
    {
        var date = new Date();
        var year = date.getFullYear();
        for(var i = 0; i <= 100; i++)
        {
            var option = document.createElement('option');
            option.textContent = year-i;
            yearSelect.appendChild(option);
        }
    }

    yearSelect.onchange = function() 
    {
        populateDays(monthSelect.value);
    }

    monthSelect.onchange = function() 
    {
        populateDays(monthSelect.value);
    }

    var previousDay;

    daySelect.onchange = function() 
    {
        previousDay = daySelect.value;
    }
</script>
<h3>Html-код</h3>
<xmp>
    <!DOCTYPE html>
    <head>
        <meta charset="UTF-8">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script defer src="share.js"></script>
    </head>
    <body>
    <header></header>
    <form>
        <div class="nativeDatePicker">
            <label for="day">Enter the date:</label>
            <input type="date" id="day" name="day">
            <span class="validity"></span>
        </div>
        <p class="fallbackLabel">Enter your birthday:</p>
        <div class="fallbackDatePicker">
        <span>
            <label for="day">Day:</label>
            <select id="day" name="day">
            </select>
        </span>
            <span>
            <label for="month">Month:</label>
            <select id="month" name="month">
                <option selected>January</option>
                <option>February</option>
                <option>March</option>
                <option>April</option>
                <option>May</option>
                <option>June</option>
                <option>July</option>
                <option>August</option>
                <option>September</option>
                <option>October</option>
                <option>November</option>
                <option>December</option>
            </select>
        </span>
            <span>
            <label for="year">Year:</label>
            <select id="year" name="year">
            </select>
        </span>
        </div>
    </form>
    <script>
        var nativePicker = document.querySelector('.nativeDatePicker');
        var fallbackPicker = document.querySelector('.fallbackDatePicker');
        var fallbackLabel = document.querySelector('.fallbackLabel');

        var yearSelect = document.querySelector('#year');
        var monthSelect = document.querySelector('#month');
        var daySelect = document.querySelector('#day');

        fallbackPicker.style.display = 'none';
        fallbackLabel.style.display = 'none';

        var test = document.createElement('input');
        test.type = 'date';

        if(test.type === 'text')
        {
            nativePicker.style.display = 'none';
            fallbackPicker.style.display = 'block';
            fallbackLabel.style.display = 'block';

            populateDays(monthSelect.value);
            populateYears();
        }

        function populateDays(month)
        {
            while(daySelect.firstChild)
            {
                daySelect.removeChild(daySelect.firstChild);
            }

            var dayNum;

            if(month === 'January' || month === 'March' || month === 'May' || month === 'July' || month === 'August' || month === 'October' || month === 'December')
            {
                dayNum = 31;
            }

            else if(month === 'April' || month === 'June' || month === 'September' || month === 'November')
            {
                dayNum = 30;
            }

            else
            {
                var year = yearSelect.value;
                var leap = (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
                dayNum = leap ? 29 : 28;
            }

            for(i = 1; i <= dayNum; i++)
            {
                var option = document.createElement('option');
                option.textContent = i;
                daySelect.appendChild(option);
            }

            if(previousDay)
            {
                daySelect.value = previousDay;

                if(daySelect.value === "")
                {
                    daySelect.value = previousDay - 1;
                }

                if(daySelect.value === "")
                {
                    daySelect.value = previousDay - 2;
                }

                if(daySelect.value === "")
                {
                    daySelect.value = previousDay - 3;
                }
            }
        }

        function populateYears()
        {
            var date = new Date();
            var year = date.getFullYear();
            for(var i = 0; i <= 100; i++)
            {
                var option = document.createElement('option');
                option.textContent = year-i;
                yearSelect.appendChild(option);
            }
        }

        yearSelect.onchange = function()
        {
            populateDays(monthSelect.value);
        }

        monthSelect.onchange = function()
        {
            populateDays(monthSelect.value);
        }

        var previousDay;

        daySelect.onchange = function()
        {
            previousDay = daySelect.value;
        }
    </script>
    <footer>
        <a href="https://github.com/feedblackg44/feedblackg44.github.io/blob/master/lab5/datapicker.html">Код сторінки.</a>
    </footer>
    </body>
</xmp>
</body>